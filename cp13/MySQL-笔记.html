<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Made with Remarkable!
  </title>
  <link href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css" rel="stylesheet"/>
  <style type="text/css">
   body,table tr{background-color:#fff}table tr td,table tr th{border:1px solid #ccc;text-align:left;padding:6px 13px;margin:0}pre code,table,table tr{padding:0}hr,pre code{background:0 0}body{font:16px Helvetica,Arial,sans-serif;line-height:1.4;color:#333;word-wrap:break-word;padding:10px 15px}strong,table tr th{font-weight:700}h1{font-size:2em;margin:.67em 0;text-align:center}h2{font-size:1.75em}h3{font-size:1.5em}h4{font-size:1.25em}h1,h2,h3,h4,h5,h6{font-weight:700;position:relative;margin-top:15px;margin-bottom:15px;line-height:1.1}h1,h2{border-bottom:1px solid #eee}hr{height:0;margin:15px 0;overflow:hidden;border:0;border-bottom:1px solid #ddd}a{color:#4183C4}a.absent{color:#c00}ol,ul{padding-left:15px;margin-left:5px}ol{list-style-type:lower-roman}table tr{border-top:1px solid #ccc;margin:0}table tr:nth-child(2n){background-color:#aaa}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td:last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}blockquote{padding:0 15px;border-left:4px solid #ccc}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre code{margin:0;white-space:pre;border:none}.highlight pre,pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}
  </style>
 </head>
 <body>
  <h1 id="mysql">
   MySQL学习笔记
  </h1>
  <p>
   数据表是存储数据的逻辑单元，可以所数据表想象成是由行和列组成的表格，其中第一行也被称为一条记录，每一列也被称为一个字段。
  </p>
  <h2 id="_1">
   数据库操作
  </h2>
  <h3 id="1">
   1.查看数据库
  </h3>
  <pre><code>SHOW DATABASES;
</code></pre>
  <h3 id="2">
   2.创建数据库
  </h3>
  <pre><code>CREATE DATABASE [IF NOT EXISTS] 数据库名;
</code></pre>
  <h3 id="3">
   3.删除数据库
  </h3>
  <pre><code>DROP DATABASE [IF EXISTS] 数据库名;
</code></pre>
  <h3 id="4">
   4.使用数据库（进入数据库）
  </h3>
  <pre><code>USE 数据库名;
</code></pre>
  <h3 id="5">
   5.进入数据库之后，用如下命令来查看数据库包含了多少张表
  </h3>
  <pre><code>SHOW TABLES;
</code></pre>
  <h3 id="6">
   6.查看指定数据表的表结构
  </h3>
  <pre><code>DESC 表名;
</code></pre>
  <h2 id="ddl">
   DDL语句
  </h2>
  <h3 id="1_1">
   1. 创建表语法
  </h3>
  <pre><code>标准的建表语句：
CREATE TABLE 表名(
    #可以有多个列定义
    columnName1 datatype [default expr],
    ...
);
</code></pre>
  <p>
   每个列定义以英文逗号(,)隔开，最的一个列定义不需要使用逗号，直接以括号结束。
   <br/>
   建表语句的重点就是括号里的列定义，列定义由字段名、数据类型、和可选的默认值与约束组成。
  </p>
  <pre><code>#用子查询建表语句建表
CREATE TABLE 表名 AS SUBQUERY;
#创建 hehe 数据表，该数据表和 user_inf 完全相同，数据也完全相同
CREATE TABLE hehe AS SELECT * FROM user_inf;
</code></pre>
  <h3 id="2_1">
   2.修改表语法
  </h3>
  <ul>
   <li>
    <p>
     增加列定义
    </p>
    <pre><code>ALTER TABLE 表名 ADD (
    #可以有多个列定义
    column_name1 datatype [default expr],
    ...
    );
</code></pre>
    <p>
     如果只增加一列，则可以省略圆括号，仅在 add 后面紧跟一个列定义即可。在这种情况下，可以使用 [FIRST|BEFORE|AFTER] 将新增列放在指定位置。
    </p>
   </li>
   <li>
    <p>
     修改列定义
    </p>
    <pre><code>ALTER TABLE 表名 MODIFY column_name DATATYPE [DEFAULT EXPR] [FRIRT|AFTER col_name]
</code></pre>
   </li>
   <li>
    <p>
     删除列定义
    </p>
    <pre><code>ALTER TABLE DROP column_name;
</code></pre>
   </li>
   <li>
    <p>
     重命名数据表
    </p>
    <pre><code>ALTER TABLE 表名 RENAME TO 新表名
</code></pre>
   </li>
   <li>
    <p>
     改变列名
    </p>
    <pre><code>ALTER TABLE 表名 CHANGE old_column_name new_column_name TYPE [DEFAULT EXPR] [FIRST| AFTER col_name];
</code></pre>
   </li>
  </ul>
  <h3 id="3_1">
   3.删除数据表
  </h3>
  <pre><code>DROP TABLE 表名;
</code></pre>
  <h3 id="4truncate">
   4.truncate 表
  </h3>
  <blockquote>
   <p>
    删除表里面的全部数据，但保留表结构。
   </p>
  </blockquote>
  <pre><code>TRUNCATE 表名;
</code></pre>
  <h2 id="_2">
   数据库约束
  </h2>
  <h3 id="1not-null">
   1.NOT NULL 非空约束
  </h3>
  <p>
   非空约束用于确保指定的列不允许为空，非空约束是比较特殊的约束，它只能作为列级约束使用。
   <br/>
   使用NOT NULL创建非空约束数据列。也可以通过修改表的方式创建非空约束列。
  </p>
  <h3 id="2unique">
   2.UNIQUE 唯一约束
  </h3>
  <p>
   唯一约束用于保证指定或指定列组合不允许出现重复值。
   <br/>
   唯一约束既可以使用列级约束语法建立，也可以使用表级约束语法建立。如果需要为多列组合建立约束，或者需要为唯一约束指定约束名。则只能使用表级约束语法。
  </p>
  <pre><code>#表级约束法建立唯一约束
[CONSTRAINT 约束名] UNIQUE (column_name1 [, column_name2, ...]);
</code></pre>
  <p>
   可以在修改表结构时使用 ADD 关键字来增加唯一约束
   <br/>
   还可以在修改表的时候使用MODIFY关键字为单列采用列级约束语法增加唯一约束。
   <br/>
   删除唯一约束使用“DORP INDEX 约束名”的方式 。
  </p>
  <h3 id="3primary-key">
   3.PRIMARY KEY 主键约束
  </h3>
  <p>
   主键约束相当于非空约束和唯一约束。即主键约束既不允许出现空值，也不允许出现重复的值。
   <br/>
   每一个表里最多只能有一个主键，但这个主键约束可由多个数据列组合而成。
   <br/>
   不管用户是否为主键约束指定约束名，MySQL总是将所有的主键约束命名为PRIMARY。
   <br/>
   创建主键约束和创建唯一约束的方法 几乎是一样的。
   <br/>
   MySQL使用 AUTO_INCREMENT来设置自增长。
  </p>
  <h3 id="4foreign-key">
   4.FOREIGN KEY 外键约束
  </h3>
  <p>
   外键约束主要用于保证一个或两个数据表之间的参照完整性。子（从）表外键列的值必须在主表被参照列的值范围之内 ，或者为空。
   <br/>
   当主表的记录被从表参照时，主表记录不允许被删除，必须先把从表里参照该记录的所有记录全部删除后，才可以删除主表的记录。还有一种记录方式，删除主表记录时级联删除从表中所有参照该记录的从表记录（ON DELETE CASCADE）
   <br/>
   要使外键约束生效，应该使用
   <strong>
    <em>
     表级约束语法
    </em>
   </strong>
   建立约束。
   <br/>
   外键约束不仅可以参照其他表，而且可以参照自身，这种参照自身的情况通常被称为自关联。
  </p>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js">
  </script>
  <script>
   hljs.initHighlightingOnLoad();
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>
  <script type="text/javascript">
   MathJax.Hub.Config({"showProcessingMessages" : false,"messageStyle" : "none","tex2jax": { inlineMath: [ [ "$", "$" ] ] }});
  </script>
 </body>
</html>